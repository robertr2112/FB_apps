
<% teams = Team.all.where(nfl: true) %>
<% entries = @pool.entries.sort_by {|entry| [entry[:survivorStatusIn] ? 0 : 1,entry[:name]] } %>
<% entries.each do |entry| %>
  <ul>
    <li><%= link_to entry.name, user_path(entry.user_id), {class: "entry-name"} %><%= "#{entry}"%></li>
    <% @season.weeks.order(:week_number).each do |week| %>
      <ul>
        <li><%= "Week: #{week.week_number}" %></li>
        <% @picks = entry.picks.where(week_number: week.week_number) %>
        <ul>
          <li><%= "picks count: #{@picks.count}"%></li>
          <% if @picks.empty? %>
            <li> no picks</li>
          <% else %>
            <% @picks.each do |pick| %>
              <ul>
                <li><%= "pick: #{pick}" %></li>
                <% game_pick = pick.game_picks.first %>
                <% if game_pick %>
                  <li><%= "game pick: #{game_pick}, chosenTeamIndex: #{game_pick.chosenTeamIndex}" %>
                      <% team_nickname = teams[game_pick.chosenTeamIndex-1].name.split(" ").last %>
                    <%= "Team: #{team_nickname}" %>
                  </li>
                <% end %>
              </ul>
            <% end %>
          <% end %>
        </ul>
      </ul>
    <% end %>
  </ul>
<% end %>